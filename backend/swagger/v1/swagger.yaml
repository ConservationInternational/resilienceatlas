---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/api/admin/layers":
    get:
      summary: List of layers
      tags:
      - Layer
      security:
      - tokenAuth: []
      parameters:
      - name: page
        in: query
        description: 'Page number. Default: 1'
        required: false
        schema:
          type: integer
      - name: per_page
        in: query
        description: 'Per page items. Default: 30'
        required: false
        schema:
          type: integer
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                success: false
                message: Invalid API Credentials
        '200':
          description: success
          content:
            application/json:
              example:
                success: true
                message: List of all Layers
                data:
                - name: molestiae
                  info: molestiae
                  legend:
                  title:
                  data_units:
                  processing:
                  description:
                  id: 120
                  layer_group_id:
                  slug: Layer-3
                  layer_type: molestiae
                  zindex: 25
                  active: false
                  order: 25
                  color: "#157e15"
                  layer_provider:
                  css:
                  interactivity: molestiae
                  opacity:
                  query:
                  created_at: '2023-03-17T15:31:08.574+01:00'
                  updated_at: '2023-03-17T15:31:08.574+01:00'
                  locate_layer: false
                  icon_class:
                  published: true
                  zoom_max: 100
                  zoom_min: 0
                  dashboard_order:
                  download: false
                  dataset_shortname:
                  dataset_source_url:
                  start_date:
                  end_date:
                  spatial_resolution:
                  spatial_resolution_units:
                  temporal_resolution:
                  temporal_resolution_units:
                  update_frequency:
                  version:
                  analysis_suitable: false
                  analysis_query:
                  layer_config:
                  analysis_body:
                  interaction_config:
                - name: cum
                  info: cum
                  legend:
                  title:
                  data_units:
                  processing:
                  description:
                  id: 119
                  layer_group_id:
                  slug: Layer-2
                  layer_type: cum
                  zindex: 41
                  active: true
                  order: 41
                  color: "#eaf1ea"
                  layer_provider:
                  css:
                  interactivity: cum
                  opacity:
                  query:
                  created_at: '2023-03-17T15:31:08.565+01:00'
                  updated_at: '2023-03-17T15:31:08.565+01:00'
                  locate_layer: false
                  icon_class:
                  published: true
                  zoom_max: 100
                  zoom_min: 0
                  dashboard_order:
                  download: false
                  dataset_shortname:
                  dataset_source_url:
                  start_date:
                  end_date:
                  spatial_resolution:
                  spatial_resolution_units:
                  temporal_resolution:
                  temporal_resolution_units:
                  update_frequency:
                  version:
                  analysis_suitable: false
                  analysis_query:
                  layer_config:
                  analysis_body:
                  interaction_config:
                - name: voluptatem
                  info: voluptatem
                  legend:
                  title:
                  data_units:
                  processing:
                  description:
                  id: 118
                  layer_group_id:
                  slug: Layer-1
                  layer_type: voluptatem
                  zindex: 38
                  active: true
                  order: 38
                  color: "#ffdbdb"
                  layer_provider:
                  css:
                  interactivity: voluptatem
                  opacity:
                  query:
                  created_at: '2023-03-17T15:31:08.559+01:00'
                  updated_at: '2023-03-17T15:31:08.559+01:00'
                  locate_layer: false
                  icon_class:
                  published: true
                  zoom_max: 100
                  zoom_min: 0
                  dashboard_order:
                  download: false
                  dataset_shortname:
                  dataset_source_url:
                  start_date:
                  end_date:
                  spatial_resolution:
                  spatial_resolution_units:
                  temporal_resolution:
                  temporal_resolution_units:
                  update_frequency:
                  version:
                  analysis_suitable: false
                  analysis_query:
                  layer_config:
                  analysis_body:
                  interaction_config:
                meta_attributes:
                  current_page: 1
                  next_page:
                  prev_page:
                  total_pages: 1
                  total_count: 3
    post:
      summary: Create new layer
      tags:
      - Layer
      security:
      - tokenAuth: []
      parameters: []
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                success: false
                message: Invalid API Credentials
        '200':
          description: success
          content:
            application/json:
              example:
                success: true
                message: Layer Created Successfully
                data:
                  name: voluptatem
                  info:
                  legend:
                  title:
                  data_units:
                  processing:
                  description:
                  id: 122
                  layer_group_id:
                  slug: Layer-1
                  layer_type: voluptatem
                  zindex: 38
                  active: true
                  order: 38
                  color: "#ffdbdb"
                  layer_provider:
                  css:
                  interactivity: voluptatem
                  opacity:
                  query:
                  created_at: '2023-03-17T15:31:08.649+01:00'
                  updated_at: '2023-03-17T15:31:08.649+01:00'
                  locate_layer: false
                  icon_class:
                  published: true
                  zoom_max: 100
                  zoom_min: 0
                  dashboard_order:
                  download: false
                  dataset_shortname:
                  dataset_source_url:
                  start_date:
                  end_date:
                  spatial_resolution:
                  spatial_resolution_units:
                  temporal_resolution:
                  temporal_resolution_units:
                  update_frequency:
                  version:
                  analysis_suitable: false
                  analysis_query:
                  layer_config:
                  analysis_body:
                  interaction_config:
        '422':
          description: Validation errors
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                layer:
                  type: object
  "/api/admin/layers/{id}":
    get:
      summary: Show detail of layer
      tags:
      - Layer
      security:
      - tokenAuth: []
      parameters:
      - name: id
        in: path
        description: Layer ID
        required: true
        schema:
          type: integer
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                success: false
                message: Invalid API Credentials
        '200':
          description: success
          content:
            application/json:
              example:
                success: true
                message: Layer Details
                data:
                  name: voluptatem
                  info: voluptatem
                  legend:
                  title:
                  data_units:
                  processing:
                  description:
                  id: 129
                  layer_group_id:
                  slug: Layer-1
                  layer_type: voluptatem
                  zindex: 38
                  active: true
                  order: 38
                  color: "#ffdbdb"
                  layer_provider:
                  css:
                  interactivity: voluptatem
                  opacity:
                  query:
                  created_at: '2023-03-17T15:31:08.789+01:00'
                  updated_at: '2023-03-17T15:31:08.789+01:00'
                  locate_layer: false
                  icon_class:
                  published: true
                  zoom_max: 100
                  zoom_min: 0
                  dashboard_order:
                  download: false
                  dataset_shortname:
                  dataset_source_url:
                  start_date:
                  end_date:
                  spatial_resolution:
                  spatial_resolution_units:
                  temporal_resolution:
                  temporal_resolution_units:
                  update_frequency:
                  version:
                  analysis_suitable: false
                  analysis_query:
                  layer_config:
                  analysis_body:
                  interaction_config:
        '422':
          description: Not Found
          content:
            application/json:
              example:
                success: false
                message: Layer not found
    delete:
      summary: Delete appropriate layer
      tags:
      - Layer
      security:
      - tokenAuth: []
      parameters:
      - name: id
        in: path
        description: Layer ID
        required: true
        schema:
          type: integer
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                success: false
                message: Invalid API Credentials
        '200':
          description: success
          content:
            application/json:
              example:
                success: true
                message: Layer Deleted Successfully
                data:
                  name:
                  info:
                  legend:
                  title:
                  data_units:
                  processing:
                  description:
                  id: 133
                  layer_group_id:
                  slug: Layer-1
                  layer_type: voluptatem
                  zindex: 38
                  active: true
                  order: 38
                  color: "#ffdbdb"
                  layer_provider:
                  css:
                  interactivity: voluptatem
                  opacity:
                  query:
                  created_at: '2023-03-17T15:31:08.894+01:00'
                  updated_at: '2023-03-17T15:31:08.894+01:00'
                  locate_layer: false
                  icon_class:
                  published: true
                  zoom_max: 100
                  zoom_min: 0
                  dashboard_order:
                  download: false
                  dataset_shortname:
                  dataset_source_url:
                  start_date:
                  end_date:
                  spatial_resolution:
                  spatial_resolution_units:
                  temporal_resolution:
                  temporal_resolution_units:
                  update_frequency:
                  version:
                  analysis_suitable: false
                  analysis_query:
                  layer_config:
                  analysis_body:
                  interaction_config:
        '422':
          description: Not Found
          content:
            application/json:
              example:
                success: false
                message: Errors
                error:
  "/api/admin/layers/site_scopes":
    get:
      summary: Get list of all site scopes
      tags:
      - Layer
      security:
      - tokenAuth: []
      parameters:
      - name: keyword
        in: query
        description: Search by keyword
        required: false
        schema:
          type: string
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                success: false
                message: Invalid API Credentials
        '200':
          description: success
          content:
            application/json:
              example:
                success: true
                message: List of all Site Scopes
                data:
                - name: AAA
                  linkback_text: Enim repellat pariatur. Earum modi eos. Libero tempora
                    exercitationem.
                  id: 71
                  color: "#ffdbdb"
                  subdomain: voluptatem
                  has_analysis: true
                  latitude: -14.936039153536683
                  longitude: -29.872078307073366
                  header_theme: Enim repellat pariatur est.
                  zoom_level: 38
                  linkback_url: http://kutch-spencer.com/moises
                  header_color: "#ffdbdb"
                  logo_url: http://kutch-spencer.com/moises
                  predictive_model: true
                  analysis_options: true
                  analytics_code:
                  has_gef_logo:
                - name: BBB
                  linkback_text: Placeat commodi libero. Quo recusandae repellat.
                    Sunt commodi tempore.
                  id: 72
                  color: "#eaf1ea"
                  subdomain: cum
                  has_analysis: true
                  latitude: -11.520917614439327
                  longitude: -23.041835228878654
                  header_theme: Placeat commodi libero et.
                  zoom_level: 41
                  linkback_url: http://bartoletti.com/jeremiah_cronin
                  header_color: "#eaf1ea"
                  logo_url: http://bartoletti.com/jeremiah_cronin
                  predictive_model: true
                  analysis_options: true
                  analytics_code:
                  has_gef_logo:
  "/users/authenticate":
    post:
      summary: Authenticate user (obtain token)
      tags:
      - User
      parameters: []
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                auth_token: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjozNiwiZXhwIjoxNjc5MTQ5ODY5fQ.G1IuJCkqKmy21ZGVWo0S1fEO8hse_xX1ogouXMHJSEA
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                error:
                  user_authentication: invalid credentials
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
              - email
              - password
  "/api/categories":
    get:
      summary: Get list of categories
      tags:
      - Category
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '46'
                  type: categories
                  attributes:
                    name: voluptatem
                    slug: Category-1
                    description: Enim repellat pariatur. Earum modi eos. Libero tempora
                      exercitationem.
                  relationships:
                    indicators:
                      data: []
                - id: '47'
                  type: categories
                  attributes:
                    name: cum
                    slug: Category-2
                    description: Placeat commodi libero. Quo recusandae repellat.
                      Sunt commodi tempore.
                  relationships:
                    indicators:
                      data: []
                - id: '48'
                  type: categories
                  attributes:
                    name: molestiae
                    slug: Category-3
                    description: Et quaerat omnis. Harum voluptas atque. Quo nesciunt
                      voluptas.
                  relationships:
                    indicators:
                      data: []
                meta:
                  total_categories: 3
  "/api/indicators":
    get:
      summary: Get list of indicators
      tags:
      - Indicator
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '24'
                  type: indicators
                  attributes:
                    name: voluptatem
                    slug: Category-1
                    version: voluptatem
                    position: 38
                    column_name: voluptatem
                    operation: voluptatem
                  relationships:
                    models:
                      data: []
                    category:
                      data:
                        id: '52'
                        type: categories
                - id: '25'
                  type: indicators
                  attributes:
                    name: cum
                    slug: Category-2
                    version: cum
                    position: 41
                    column_name: cum
                    operation: cum
                  relationships:
                    models:
                      data: []
                    category:
                      data:
                        id: '53'
                        type: categories
                - id: '26'
                  type: indicators
                  attributes:
                    name: molestiae
                    slug: Category-3
                    version: molestiae
                    position: 25
                    column_name: molestiae
                    operation: molestiae
                  relationships:
                    models:
                      data: []
                    category:
                      data:
                        id: '54'
                        type: categories
                included:
                - id: '52'
                  type: categories
                  attributes:
                    name: voluptatem
                    slug: Category-1
                    description: Enim repellat pariatur. Earum modi eos. Libero tempora
                      exercitationem.
                  relationships:
                    indicators:
                      data:
                      - id: '24'
                        type: indicators
                - id: '53'
                  type: categories
                  attributes:
                    name: cum
                    slug: Category-2
                    description: Placeat commodi libero. Quo recusandae repellat.
                      Sunt commodi tempore.
                  relationships:
                    indicators:
                      data:
                      - id: '25'
                        type: indicators
                - id: '54'
                  type: categories
                  attributes:
                    name: molestiae
                    slug: Category-3
                    description: Et quaerat omnis. Harum voluptas atque. Quo nesciunt
                      voluptas.
                  relationships:
                    indicators:
                      data:
                      - id: '26'
                        type: indicators
                meta:
                  total_indicators: 3
  "/api/journeys":
    get:
      summary: Get list of journeys
      tags:
      - Journey
      parameters:
      - name: locale
        in: query
        description: 'Used language. Default: en'
        required: false
        schema:
          type: string
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '127'
                  type: journeys
                  attributes:
                    title: Enim repellat pariatur est.
                    subtitle: Enim repellat pariatur est.
                    theme: Enim repellat pariatur est.
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdWdCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--e75bb52de87718013de08101b618b38a2e092c47/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdWdCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--e75bb52de87718013de08101b618b38a2e092c47/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdWdCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--e75bb52de87718013de08101b618b38a2e092c47/picture.jpg
                    credits: Enim repellat pariatur est.
                    credits_url: http://kutch-spencer.com/moises
                    published: true
                  relationships:
                    journey_steps:
                      data:
                      - id: '289'
                        type: journey_steps
                      - id: '290'
                        type: journey_steps
                - id: '128'
                  type: journeys
                  attributes:
                    title: Placeat commodi libero et.
                    subtitle: Placeat commodi libero et.
                    theme: Placeat commodi libero et.
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdXNCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7138f2bd6e27de1e863064ed891b8972e19a7e91/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdXNCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7138f2bd6e27de1e863064ed891b8972e19a7e91/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdXNCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7138f2bd6e27de1e863064ed891b8972e19a7e91/picture.jpg
                    credits: Placeat commodi libero et.
                    credits_url: http://bartoletti.com/jeremiah_cronin
                    published: true
                  relationships:
                    journey_steps:
                      data:
                      - id: '291'
                        type: journey_steps
                      - id: '292'
                        type: journey_steps
                - id: '129'
                  type: journeys
                  attributes:
                    title: Et quaerat omnis veniam.
                    subtitle: Et quaerat omnis veniam.
                    theme: Et quaerat omnis veniam.
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdTRCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--a608260042a350be31b2c30bcd1f6fca95ead2b7/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdTRCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--a608260042a350be31b2c30bcd1f6fca95ead2b7/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdTRCIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--a608260042a350be31b2c30bcd1f6fca95ead2b7/picture.jpg
                    credits: Et quaerat omnis veniam.
                    credits_url: http://hane.com/jules
                    published: true
                  relationships:
                    journey_steps:
                      data:
                      - id: '293'
                        type: journey_steps
                      - id: '294'
                        type: journey_steps
                meta:
                  total: 3
  "/api/journeys/{id}":
    get:
      summary: Get appropriate journey
      tags:
      - Journey
      parameters:
      - name: id
        in: path
        description: Journey ID
        required: true
        schema:
          type: integer
      - name: locale
        in: query
        description: 'Used language. Default: en'
        required: false
        schema:
          type: string
      responses:
        '404':
          description: Not Found
          content:
            application/json:
              example:
                errors:
                - status: '404'
                  title: Record not found
              schema:
                "$ref": "#/components/schemas/errors"
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                  id: '148'
                  type: journeys
                  attributes:
                    title: Autem et et ex.
                    subtitle: Autem et et ex.
                    theme: Autem et et ex.
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaTBDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c6936f8e24ba357a269b5a6d8f7b414c40718c4e/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaTBDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c6936f8e24ba357a269b5a6d8f7b414c40718c4e/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaTBDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c6936f8e24ba357a269b5a6d8f7b414c40718c4e/picture.jpg
                    credits: Autem et et ex.
                    credits_url: http://jacobson.biz/everett
                    published: true
                  relationships:
                    journey_steps:
                      data:
                      - id: '329'
                        type: journey_steps
                      - id: '332'
                        type: journey_steps
                      - id: '335'
                        type: journey_steps
                      - id: '338'
                        type: journey_steps
                included:
                - id: '329'
                  type: journey_steps
                  attributes:
                    step_type: landing
                    position: 25
                    title: Et quaerat omnis veniam.
                    description: Et quaerat omnis veniam.
                    credits: Et quaerat omnis veniam.
                    credits_url: http://hane.com/jules
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaUFDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--44d90d408781a777f8a1d790bf2a6f5339876010/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaUFDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--44d90d408781a777f8a1d790bf2a6f5339876010/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaUFDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--44d90d408781a777f8a1d790bf2a6f5339876010/picture.jpg
                - id: '332'
                  type: journey_steps
                  attributes:
                    step_type: conclusion
                    position: 11
                    title: Porro soluta beatae sint.
                    subtitle: Porro soluta beatae sint.
                    content: Porro soluta beatae. Quia ratione facilis. Eligendi sapiente
                      voluptatem.
                    credits: Porro soluta beatae sint.
                    credits_url: http://keebler.info/daine
                    background_color: "#c2e0e0"
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaVFDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--a44b4877ded33d1e36116a81841cf086e6156cf3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaVFDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--a44b4877ded33d1e36116a81841cf086e6156cf3/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaVFDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--a44b4877ded33d1e36116a81841cf086e6156cf3/picture.jpg
                - id: '335'
                  type: journey_steps
                  attributes:
                    step_type: chapter
                    position: 93
                    title: Impedit animi eveniet numquam.
                    description: Impedit animi eveniet numquam.
                    chapter_number: 93
                    credits: Impedit animi eveniet numquam.
                    credits_url: http://ritchie.com/jame
                    background_image:
                      small: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaWdDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--58f7f9bd6c9245a87f2e7460e1ed043e576ea3e5/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERJd01IZ3lNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--7be8b6f6018bc25ae287d258d8836839fa7642f1/picture.jpg
                      medium: http://localhost:3000/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaWdDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--58f7f9bd6c9245a87f2e7460e1ed043e576ea3e5/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCem9MWm05eWJXRjBTU0lJYW5CbkJqb0dSVlE2QzNKbGMybDZaVWtpRERnd01IZzRNREFHT3daVSIsImV4cCI6bnVsbCwicHVyIjoidmFyaWF0aW9uIn19--697714719ccce7b35c5f9a02aeef5bd517f3d81f/picture.jpg
                      original: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBaWdDIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--58f7f9bd6c9245a87f2e7460e1ed043e576ea3e5/picture.jpg
                - id: '338'
                  type: journey_steps
                  attributes:
                    step_type: embed
                    position: 76
                    content: Eum consequuntur adipisci. Facere iure beatae. In odio
                      reiciendis.
                    source: Eum consequuntur adipisci non.
                    mask_sql: Eum consequuntur adipisci non.
                    map_url: http://lind.name/alana
                    embedded_map_url: http://lind.name/alana
  "/api/layer-groups":
    get:
      summary: Get list of layer groups
      tags:
      - LayerGroup
      parameters:
      - name: site_scope
        in: query
        description: Site scope to list layers for
        required: false
        schema:
          type: string
      - name: locale
        in: query
        description: 'Used language. Default: en'
        required: false
        schema:
          type: string
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '45'
                  type: layer_groups
                  attributes:
                    name: voluptatem
                    slug: LayerGroup-1
                    category: voluptatem
                    active: true
                    order: 38
                    info: Enim repellat pariatur. Earum modi eos. Libero tempora exercitationem.
                    layer_group_type: voluptatem
                    super_group_id:
                    super_group_name:
                    icon_class: voluptatem
                  relationships:
                    super_group:
                      data:
                - id: '46'
                  type: layer_groups
                  attributes:
                    name: cum
                    slug: LayerGroup-2
                    category: cum
                    active: true
                    order: 41
                    info: Placeat commodi libero. Quo recusandae repellat. Sunt commodi
                      tempore.
                    layer_group_type: cum
                    super_group_id:
                    super_group_name:
                    icon_class: cum
                  relationships:
                    super_group:
                      data:
                - id: '47'
                  type: layer_groups
                  attributes:
                    name: molestiae
                    slug: LayerGroup-3
                    category: molestiae
                    active: false
                    order: 25
                    info: Et quaerat omnis. Harum voluptas atque. Quo nesciunt voluptas.
                    layer_group_type: molestiae
                    super_group_id:
                    super_group_name:
                    icon_class: molestiae
                  relationships:
                    super_group:
                      data:
                meta:
                  total_layer_groups: 3
  "/api/layers":
    get:
      summary: Get list of layers
      tags:
      - Layer
      parameters:
      - name: site_scope
        in: query
        description: Site scope to list layers for
        required: false
        schema:
          type: string
      - name: locale
        in: query
        description: 'Used language. Default: en'
        required: false
        schema:
          type: string
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '138'
                  type: layers
                  attributes:
                    name: voluptatem
                    slug: Layer-1
                    layer_type: voluptatem
                    zindex: 38
                    opacity:
                    active: true
                    order: 38
                    dashboard_order:
                    color: "#ffdbdb"
                    info: voluptatem
                    interactivity: voluptatem
                    css:
                    query:
                    layer_config:
                    layer_provider:
                    published: true
                    locate_layer: false
                    icon_class:
                    legend:
                    zoom_max: 100
                    zoom_min: 0
                    download: false
                    dataset_shortname:
                    dataset_source_url:
                    analysis_suitable: false
                    analysis_query:
                    analysis_body:
                    interaction_config:
                  relationships:
                    layer_group:
                      data:
                        id: '54'
                        type: layer_groups
                    sources:
                      data: []
                    agrupation:
                      data:
                        id: 22
                        layer_id: 138
                        layer_group_id: 54
                        active: false
                - id: '139'
                  type: layers
                  attributes:
                    name: cum
                    slug: Layer-2
                    layer_type: cum
                    zindex: 41
                    opacity:
                    active: true
                    order: 41
                    dashboard_order:
                    color: "#eaf1ea"
                    info: cum
                    interactivity: cum
                    css:
                    query:
                    layer_config:
                    layer_provider:
                    published: true
                    locate_layer: false
                    icon_class:
                    legend:
                    zoom_max: 100
                    zoom_min: 0
                    download: false
                    dataset_shortname:
                    dataset_source_url:
                    analysis_suitable: false
                    analysis_query:
                    analysis_body:
                    interaction_config:
                  relationships:
                    layer_group:
                      data:
                        id: '54'
                        type: layer_groups
                    sources:
                      data: []
                    agrupation:
                      data:
                        id: 23
                        layer_id: 139
                        layer_group_id: 54
                        active: false
                - id: '140'
                  type: layers
                  attributes:
                    name: molestiae
                    slug: Layer-3
                    layer_type: molestiae
                    zindex: 25
                    opacity:
                    active: false
                    order: 25
                    dashboard_order:
                    color: "#157e15"
                    info: molestiae
                    interactivity: molestiae
                    css:
                    query:
                    layer_config:
                    layer_provider:
                    published: true
                    locate_layer: false
                    icon_class:
                    legend:
                    zoom_max: 100
                    zoom_min: 0
                    download: false
                    dataset_shortname:
                    dataset_source_url:
                    analysis_suitable: false
                    analysis_query:
                    analysis_body:
                    interaction_config:
                  relationships:
                    layer_group:
                      data:
                        id: '54'
                        type: layer_groups
                    sources:
                      data: []
                    agrupation:
                      data:
                        id: 24
                        layer_id: 140
                        layer_group_id: 54
                        active: false
                meta:
                  total_layers: 3
  "/api/layers/{id}/downloads":
    get:
      summary: Download layer file
      tags:
      - Layer
      parameters:
      - name: id
        in: path
        description: Layer ID
        required: true
        schema:
          type: integer
      - name: download_path
        in: query
        description: Url to the file download
        required: false
        schema:
          type: string
      - name: file_format
        in: query
        description: File format (pdf, kml, jpg, txt, etc..)
        required: false
        schema:
          type: string
      - name: with_format
        in: query
        description: If format is part of download_path
        required: false
        schema:
          type: string
      responses:
        '200':
          description: success
  "/api/menu-entries":
    get:
      summary: Get list of map menu entries
      tags:
      - MapMenuEntry
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '24'
                  type: map_menu_entries
                  attributes:
                    label: Otha Kemmer
                    link: http://kutch-spencer.com/moises
                    position: 38
                    ancestry:
                - id: '25'
                  type: map_menu_entries
                  attributes:
                    label: Msgr. Genaro Cronin
                    link: http://bartoletti.com/jeremiah_cronin
                    position: 41
                    ancestry:
                - id: '26'
                  type: map_menu_entries
                  attributes:
                    label: Raymon Wisoky
                    link: http://hane.com/jules
                    position: 25
                    ancestry:
  "/api/models":
    get:
      summary: Get list of models
      tags:
      - Model
      parameters:
      - name: site_scope
        in: query
        description: Site scope to list layers for
        required: false
        schema:
          type: integer
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '31'
                  type: models
                  attributes:
                    name: voluptatem
                    description: Enim repellat pariatur. Earum modi eos. Libero tempora
                      exercitationem.
                    source: Enim repellat pariatur est.
                    query_analysis: Enim repellat pariatur est.
                    table_name: voluptatem
                  relationships:
                    site_scopes:
                      data:
                      - id: '1'
                        type: site_scopes
                    indicators:
                      data: []
                - id: '32'
                  type: models
                  attributes:
                    name: cum
                    description: Placeat commodi libero. Quo recusandae repellat.
                      Sunt commodi tempore.
                    source: Placeat commodi libero et.
                    query_analysis: Placeat commodi libero et.
                    table_name: cum
                  relationships:
                    site_scopes:
                      data:
                      - id: '1'
                        type: site_scopes
                    indicators:
                      data: []
                - id: '33'
                  type: models
                  attributes:
                    name: molestiae
                    description: Et quaerat omnis. Harum voluptas atque. Quo nesciunt
                      voluptas.
                    source: Et quaerat omnis veniam.
                    query_analysis: Et quaerat omnis veniam.
                    table_name: molestiae
                  relationships:
                    site_scopes:
                      data:
                      - id: '1'
                        type: site_scopes
                    indicators:
                      data: []
                - id: '34'
                  type: models
                  attributes:
                    name: quos
                    description: Dolores fugiat nesciunt. Ut laborum dolores. Sit
                      neque eos.
                    source: Dolores fugiat nesciunt accusantium.
                    query_analysis: Dolores fugiat nesciunt accusantium.
                    table_name: quos
                  relationships:
                    site_scopes:
                      data:
                      - id: '2'
                        type: site_scopes
                    indicators:
                      data: []
                included:
                - id: '1'
                  type: site_scopes
                  attributes:
                    name: CIGRP
                    color: "#ffdbdb"
                    subdomain: voluptatem
                    has_analysis: true
                    latitude: -14.936039153536683
                    longitude: -29.872078307073366
                    header_theme: Enim repellat pariatur est.
                    zoom_level: 38
                    linkback_text: Enim repellat pariatur. Earum modi eos. Libero
                      tempora exercitationem.
                    linkback_url: http://kutch-spencer.com/moises
                    header_color: "#ffdbdb"
                    logo_url: http://kutch-spencer.com/moises
                    predictive_model: true
                    analysis_options: true
                    analytics_code:
                    has_gef_logo:
                  relationships:
                    site_pages:
                      data: []
                - id: '2'
                  type: site_scopes
                  attributes:
                    name: Otha Kemmer
                    color: "#eaf1ea"
                    subdomain: cum
                    has_analysis: true
                    latitude: -11.520917614439327
                    longitude: -23.041835228878654
                    header_theme: Placeat commodi libero et.
                    zoom_level: 41
                    linkback_text: Placeat commodi libero. Quo recusandae repellat.
                      Sunt commodi tempore.
                    linkback_url: http://bartoletti.com/jeremiah_cronin
                    header_color: "#eaf1ea"
                    logo_url: http://bartoletti.com/jeremiah_cronin
                    predictive_model: true
                    analysis_options: true
                    analytics_code:
                    has_gef_logo:
                  relationships:
                    site_pages:
                      data: []
                meta:
                  total_models: 4
  "/services/oembed":
    get:
      summary: Get appropriate iframe
      tags:
      - Oembed
      parameters:
      - name: url
        in: query
        required: false
        schema:
          type: string
      - name: format
        in: query
        required: false
        schema:
          type: string
      - name: maxwidth
        in: query
        required: false
        schema:
          type: integer
      - name: maxheight
        in: query
        required: false
        schema:
          type: integer
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                width: 960
                height: 600
                version: '1.0'
                type: rich
                provider_name: resilienceatlas.org
                provider_url: http://resilienceatlas.org
                html: <iframe frameborder="0" width="960" height="600" src="https://resilienceatlas.org/embed/map?test=test"></iframe>
        '400':
          description: Domain does not include map path
        '403':
          description: Domain is not permitted
        '404':
          description: Domain information is missing
        '422':
          description: Domain is not url or base64 string
  "/api/photos":
    post:
      summary: Save new image
      tags:
      - Photo
      parameters: []
      responses:
        '201':
          description: success
          content:
            application/json:
              example:
                id: 4
                image_data: '{"id":"069b9debe6f35afb118dfd2d3e50d9e7.jpg","storage":"store","metadata":{"filename":"picture.jpg","size":32326,"mime_type":null}}'
                created_at: '2023-03-17T15:31:37.741+01:00'
                updated_at: '2023-03-17T15:31:37.751+01:00'
                url: "/uploads/store/069b9debe6f35afb118dfd2d3e50d9e7.jpg"
                image_url: "/uploads/store/069b9debe6f35afb118dfd2d3e50d9e7.jpg"
  "/users/register":
    post:
      summary: Register new user
      tags:
      - User
      parameters: []
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                status: created
        '422':
          description: Validation errors
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    email:
                      type: string
                    password:
                      type: string
                    password_confirmation:
                      type: string
                      nullable: true
                    first_name:
                      type: string
                      nullable: true
                    last_name:
                      type: string
                      nullable: true
                    organization:
                      type: string
                      nullable: true
                    organization_role:
                      type: string
                      nullable: true
                  required:
                  - email
                  - password
                required:
                - user
  "/api/share/{uid}":
    get:
      summary: Get detail of shared url
      tags:
      - ShareUrl
      parameters:
      - name: uid
        in: path
        description: An unique url identifier
        required: true
        schema:
          type: string
      responses:
        '404':
          description: Not Found
          content:
            application/json:
              example:
                errors:
                - status: '404'
                  title: Record not found
              schema:
                "$ref": "#/components/schemas/errors"
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                  id: '6'
                  type: share_urls
                  attributes:
                    uid: '12345'
                    body: body test
  "/api/share":
    post:
      summary: Create new shared url
      tags:
      - ShareUrl
      parameters:
      - name: body
        in: query
        description: Body of shared url
        schema:
          type: string
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                uid: 5b659c470f678539a177
  "/api/sites":
    get:
      summary: Get list of all site scopes
      tags:
      - SiteScope
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                - id: '1'
                  type: site_scopes
                  attributes:
                    name: CIGRP
                    color: "#ffdbdb"
                    subdomain: voluptatem
                    has_analysis: true
                    latitude: -14.936039153536683
                    longitude: -29.872078307073366
                    header_theme: Enim repellat pariatur est.
                    zoom_level: 38
                    linkback_text: Enim repellat pariatur. Earum modi eos. Libero
                      tempora exercitationem.
                    linkback_url: http://kutch-spencer.com/moises
                    header_color: "#ffdbdb"
                    logo_url: http://kutch-spencer.com/moises
                    predictive_model: true
                    analysis_options: true
                    analytics_code:
                    has_gef_logo:
                  relationships:
                    site_pages:
                      data: []
                - id: '2'
                  type: site_scopes
                  attributes:
                    name: Otha Kemmer
                    color: "#eaf1ea"
                    subdomain: cum
                    has_analysis: true
                    latitude: -11.520917614439327
                    longitude: -23.041835228878654
                    header_theme: Placeat commodi libero et.
                    zoom_level: 41
                    linkback_text: Placeat commodi libero. Quo recusandae repellat.
                      Sunt commodi tempore.
                    linkback_url: http://bartoletti.com/jeremiah_cronin
                    header_color: "#eaf1ea"
                    logo_url: http://bartoletti.com/jeremiah_cronin
                    predictive_model: true
                    analysis_options: true
                    analytics_code:
                    has_gef_logo:
                  relationships:
                    site_pages:
                      data: []
  "/api/site":
    get:
      summary: Get appropriate site scope
      tags:
      - SiteScope
      parameters:
      - name: site_scope
        in: query
        description: Site scope subdomain
        required: false
        schema:
          type: string
      responses:
        '200':
          description: success
          content:
            application/json:
              example:
                data:
                  id: '1'
                  type: site_scopes
                  attributes:
                    name: CIGRP
                    color: "#ffdbdb"
                    subdomain: voluptatem
                    has_analysis: true
                    latitude: -14.936039153536683
                    longitude: -29.872078307073366
                    header_theme: Enim repellat pariatur est.
                    zoom_level: 38
                    linkback_text: Enim repellat pariatur. Earum modi eos. Libero
                      tempora exercitationem.
                    linkback_url: http://kutch-spencer.com/moises
                    header_color: "#ffdbdb"
                    logo_url: http://kutch-spencer.com/moises
                    predictive_model: true
                    analysis_options: true
                    analytics_code:
                    has_gef_logo:
                  relationships:
                    site_pages:
                      data:
                      - id: '20'
                        type: site_pages
                included:
                - id: '20'
                  type: site_pages
                  attributes:
                    title: voluptatem
                    priority: 38
                    url: "/contents/SitePage-1"
  "/users/me":
    get:
      summary: Obtains information about current user
      tags:
      - User
      security:
      - bearerAuth: []
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                errors:
                - status: '401'
                  title: Unauthorized
        '200':
          description: success
          content:
            application/json:
              example:
                id: 41
                email: person-1@example.com
                created_at: '2023-03-17T15:31:39.532+01:00'
                updated_at: '2023-03-17T15:31:39.532+01:00'
                first_name: Dawna
                last_name: Block
                phone: "(995) 001-7692 x452"
                organization: voluptatem
                organization_role: voluptatem
    patch:
      summary: Update current user
      tags:
      - User
      security:
      - bearerAuth: []
      parameters: []
      responses:
        '401':
          description: Unauthorized
          content:
            application/json:
              example:
                errors:
                - status: '401'
                  title: Unauthorized
        '200':
          description: success
          content:
            application/json:
              example:
                first_name: Jan
                last_name: Kowalski
                email: jankowalski@example.com
                id: 43
                created_at: '2023-03-17T15:31:39.582+01:00'
                updated_at: '2023-03-17T15:31:39.596+01:00'
                phone: "(995) 001-7692 x452"
                organization: voluptatem
                organization_role: voluptatem
        '422':
          description: Validation errors
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    email:
                      type: string
                    password:
                      type: string
                    password_confirmation:
                      type: string
                      nullable: true
                    first_name:
                      type: string
                      nullable: true
                    last_name:
                      type: string
                      nullable: true
                    organization:
                      type: string
                      nullable: true
                    organization_role:
                      type: string
                      nullable: true
                  required:
                  - email
                  - password
                required:
                - user
components:
  securitySchemes:
    tokenAuth:
      type: http
      scheme: bearer
      name: Authorization
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      name: Authorization
  schemas:
    errors:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              status:
                type: string
              title:
                type: string
            required:
            - status
            - title
      required:
      - errors
servers:
- url: ''
- url: "{scheme}://{host}"
  variables:
    scheme:
      default: http
    host:
      default: localhost:3000
