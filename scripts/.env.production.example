# Example .env file for PRODUCTION environment (frontend + backend)
# This file shows the environment variables needed for EC2 deployment (production environment)
# Copy to the project root as .env.production and update with your actual values

#=============================================================================
# PRODUCTION ENVIRONMENT VARIABLES (FRONTEND + BACKEND COMBINED)
# These variables are used by Docker Compose during EC2 deployment via CodeDeploy
#=============================================================================

# Database configuration (external PostgreSQL)
PRODUCTION_DATABASE_URL=postgresql://resilienceatlas_prod:your_production_db_password@prod-db-host:5432/resilienceatlas_production
PRODUCTION_SECRET_KEY_BASE=your_128_character_random_secret_key_base_for_rails_sessions_and_cookies_production_environment_use_rails_secret_to_generate
PRODUCTION_DEVISE_KEY=your_128_character_random_devise_key_for_authentication_production_environment_use_rails_secret_to_generate

# External service API keys for production
SPARKPOST_API_KEY=your_sparkpost_production_api_key_for_email_services
RESILIENCE_API_KEY=your_resilience_production_api_key

# Application URLs
PRODUCTION_BACKEND_URL=https://resilienceatlas.org
PRODUCTION_FRONTEND_URL=https://resilienceatlas.org

# Frontend build-time variables (used as Docker build args)
NEXT_PUBLIC_API_HOST=https://resilienceatlas.org
# Internal API host for server-side rendering (automatically set in docker-compose.yml)
# This allows the Next.js server to reach the backend via Docker network
# Value is set to http://backend:3000 in docker-compose.yml - no need to change
NEXT_PUBLIC_TRANSIFEX_TOKEN=your_transifex_production_api_token_for_translation_services
NEXT_PUBLIC_TRANSIFEX_SECRET=your_transifex_production_secret_key
NEXT_PUBLIC_GOOGLE_API_KEY=your_google_production_api_key_for_maps_and_services
NEXT_PUBLIC_GOOGLE_ANALYTICS=UA-XXXXXXX-X

#=============================================================================
# RAILS ENVIRONMENT VARIABLES (automatically set)
#=============================================================================
# These are set automatically by Docker Compose:
# RAILS_ENV=production
# NODE_ENV=production
# PORT=3000 (frontend), 3001 (backend)

#=============================================================================
# USAGE INSTRUCTIONS
#=============================================================================
# 
# 1. Copy this file to the project root as .env.production:
#    cp scripts/.env.production.example .env.production
# 
# 2. Replace all placeholder values with your actual production credentials
# 
# 3. The file will be used by:
#    - Docker Compose during deployment (docker-compose.yml)
#    - GitHub Actions CodeDeploy workflows (codedeploy_production.yml)
#    - CodeDeploy lifecycle hook scripts
#
# Important Security Notes:
# - This file contains sensitive credentials - never commit to version control
# - Use different credentials for production vs staging
# - Generate Rails secrets with: rails secret (128-character strings)
# - Use strong, unique passwords and API keys
# - Enable database SSL/TLS for production database connections
# - Regularly audit and rotate all API keys and secrets
#
# GitHub Actions Integration:
# The sensitive values from this file should also be added as GitHub repository secrets:
# - AWS_OIDC_ROLE_ARN (from setup_github_oidc.py)
# - DEPLOYMENT_S3_BUCKET (from setup_s3_bucket.py)
# - PRODUCTION_DATABASE_URL
# - PRODUCTION_SECRET_KEY_BASE  
# - PRODUCTION_DEVISE_KEY
# - SPARKPOST_API_KEY
# - RESILIENCE_API_KEY
# - NEXT_PUBLIC_TRANSIFEX_TOKEN
# - NEXT_PUBLIC_TRANSIFEX_SECRET
# - NEXT_PUBLIC_GOOGLE_API_KEY
# - NEXT_PUBLIC_GOOGLE_ANALYTICS
#=============================================================================
